censor:
  strategy: sequential
  timeout: 30s
  enabled_only: true
  error_action: block
  skip_action: allow
  plugins:
    keyword:
      enabled: true
      priority: 10
      config:
        blacklist:
          - spam
          - scam
          - phishing

    ratelimit:
      enabled: true
      priority: 5
      config:
        max_messages: 5
        window: "1m"

    regex:
      enabled: true
      priority: 20
      config:
        patterns:
          - '(?i)https?://[\w\-\.]+\.xyz' # Block .xyz domains
          - '\b\d{16}\b' # Block credit card numbers

    # Forwarded messages restriction plugin
    # Blocks or allows forwarded messages based on source
    forwarded:
      enabled: true
      priority: 15
      config:
        # Optional: List of user IDs whose messages can be forwarded
        # allowed_user_ids:
        #   - 123456789  # Admin user ID
        #   - 987654321  # Trusted user ID

        # Optional: List of chat IDs whose messages can be forwarded
        # allowed_chat_ids:
        #   - -1001234567890  # Official channel ID (negative for supergroups/channels)
        #   - -1000987654321  # Another allowed chat

    # Duplicate plugin - detects and blocks repetitive messages from users
    # This plugin tracks identical or very similar messages within a time window
    # and blocks users who exceed the maximum duplicate threshold.
    # Priority: 150 (runs after rate limit, keyword, and regex checks)
    duplicate:
      enabled: true
      priority: 150
      config:
        # Maximum number of duplicate messages allowed before blocking
        max_duplicates: 1

        # Time window to consider messages as duplicates
        # Messages sent within this timeframe are compared for similarity
        # Supported formats: "30s", "5m", "1h", "24h"
        window: "5m"

    llm:
      enabled: true
      priority: 250
      config:
        api_key: "sk-1234567890"
        model: nvidia/nemotron-nano-9b-v2:free
        confidence_threshold: 0.8
        timeout: 30s
        prompt: 'Analyze the following message for inappropriate content, spam, or violations. Respond with JSON: {"inappropriate": boolean, "confidence": float, "reason": string}'
        temperature: 0.1
        # Enable caching for LLM responses to reduce API calls and improve performance
        cache_enabled: true # default: true
        # Time to live for cached responses (supported formats: "30s", "5m", "1h")
        cache_ttl: "1h" # default: "1h"
        # Maximum number of responses to cache
        cache_max_size: 1000 # default: 1000
